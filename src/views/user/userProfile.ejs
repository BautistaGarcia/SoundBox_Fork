<!-- -VISTA PARA USUARIOS- -->

<%- include('../partials/head.ejs') %>
    <link href="/styles/userProfile.css" rel="stylesheet">


    <!-- =========================================================================================================== -->

    <!-- -HEADER / ENCABEZADO- -->
    <%- include('../partials/header.ejs') %>

        <!-- =========================================================================================================== -->

        <main>
            <div class="goBack-container">
                <a href="/"><i class="fa-solid fa-arrow-left"></i></a>
            </div>
            <div id="profile-title">

                <div class="img-container">
                    <img src="/img/users/<%=user.image%>" alt="">
                </div>
            </div>
            <section class="primary-section">
                <section class="first-section">
                    <section class="second-section">
                        <strong class="user-fullName">
                            <%= user.first_name %>
                                <%= user.last_name %>
                        </strong>
                        <div class="user-buttons">
                            <div class="edit-user">
                                <button class="profile-button" onclick="show()"> Edit Profile </button>
                            </div>
                            <div class="more-user">
                                <button class="profile-showMore-button"> <i class="fa-solid fa-caret-down"></i>
                                </button>
                            </div>
                        </div>
                    </section>
                    <ul class="profile-info-navBar">
                        <li class="profile-navBar-buttons">Perfil</li>
                        <li class="profile-navBar-buttons">Compras</li>
                        <li class="profile-navBar-buttons">Favoritos</li>
                        <li class="profile-navBar-buttons">Reseñas</li>
                    </ul>
                    <div class="user-description" id="user-description">
                        <div class="data-user">
                            <span style="text-decoration: underline;">
                                Todos tus datos:
                            </span>
                            <span>
                                Email: <br>
                                <%= user.e_mail %>
                            </span>
                            <span>
                                Pais: <br>
                                <%= user.country.country %>
                            </span>
                            <span>
                                Fecha de Registro: <br>
                                <%= user.registered_date %>
                            </span>
                            <span>
                                Tipo de Usuario: <br>
                                <%= user.user_type.user_type %>
                            </span>
                        </div>

                    </div>
                    <section id="edit-user-form">
                        <!-- SE BUSCA EL TIPO DE USUARIO DE LA SESIÓN A TRAVÉS DE 'LOCALS', PARA CONFIGURAR EL ATRIBUTO 'action' DEL FORMULARIO -->
                        <% if (locals.userIsLogged==true && locals.userIsAdmin==false) { %>
                            <form action="/users/userProfile/<%= user.id %>?_method=PUT" method="POST"
                                enctype="multipart/x-www-form-urlencoded">
                                <% } else if (locals.userIsLogged==true && locals.userIsAdmin==true) { %>
                                    <form action="/admin/userProfile/<%= user.id %>?_method=PUT" method="POST"
                                        enctype="multipart/x-www-form-urlencoded">
                                        <% } %>

                                            <div class="errores">
                                                <ul></ul>
                                            </div>

                                            <label for="">
                                                <p>Name</p>
                                                <input id="user-name" name="first_name" type="text"
                                                    value="<%= user.first_name %>">
                                            </label>
                                            <label for="">
                                                <p>Last name</p>
                                                <input id="last-name" name="last_name" type="text"
                                                    value="<%= user.last_name %>">
                                            </label>
                                            <label for="">
                                                <p>Email</p>
                                                <input id="e-mail" name="e_mail" type="text" value="<%= user.e_mail %>">
                                            </label>

                                            <div>
                                                <input class="profile-button" type="submit">
                                                <button class="profile-button" onclick="hide()">Volver</button>
                                            </div>

                                    </form>
                    </section>

                </section>
            </section>
            <section class="imageProfile-window" id="imageProfile-window">
                <div class="image-container-modalWindow">
                    <img src="/img/users/<%=user.image%>" alt="">
                </div>
                <div class="closeProfileModal" id="closeProfileModal">
                    <i class="fa-solid fa-x"></i>
                </div>
            </section>
        </main>

        <!-- =========================================================================================================== -->
        <!-- FOOTER / PIE DE PAGINA -->
        <%- include('../partials/footer.ejs') %>
            <script src="/scripts/user.js"></script>

            <!-- =========================================================================================================== -->